"use strict";(self.webpackChunkliwx_docs=self.webpackChunkliwx_docs||[]).push([[1883],{1045:(e,i,l)=>{l.r(i),l.d(i,{comp:()=>o,data:()=>r});var t=l(641);const n=[(0,t.Fv)('<h1 id="webpack-构建流程" tabindex="-1"><a class="header-anchor" href="#webpack-构建流程"><span>Webpack 构建流程</span></a></h1><ol><li><strong>初始化参数</strong>：从配置文件和 shell 语句中读取与合并参数，得出最终的参数。</li><li>利用得到的参数<strong>初始化 compiler 对象</strong></li><li><strong>加载所有配置的插件</strong>：依次调用插件的 apply 方法，让插件可以监听 webpack 的生命周期，并且绑定相应的钩子函数。</li><li><strong>执行对象的 run 方法开始执行编译</strong>：确定入口，调用所有配置的插件的 apply 方法开始执行编译。</li><li><strong>确定入口</strong>：根据配置中的 entry 找出所有的入口文件。</li><li><strong>编译模块</strong>：从入口文件出发，调用所有配置的 loader 对模块进行编译，再找出该模块依赖的模块，递归进行编译，直到所有入口依赖的文件都经过了本步骤的处理。</li><li><strong>完成模块编译</strong>：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 Chunk，再把每个 Chunk 转换成一个单独的文件加入到输出列表。</li><li><strong>输出资源</strong>：根据配置确定输出的路径和文件名，把文件内容写入到文件系统。</li></ol><h2 id="vite-的构建流程" tabindex="-1"><a class="header-anchor" href="#vite-的构建流程"><span>Vite 的构建流程</span></a></h2><ol><li><strong>依赖与预构建</strong> Vite 启东时会对 node_modules 中的依赖进行预构建，将 commonJS 模块转换成 es 模块，这样浏览器可以直接通过 import 引入，而不需要再通过打包器进行打包，从而提升开发体验。</li><li><strong>开发启动服务器模式</strong>，Vite 通过劫持浏览器的请求，将浏览器请求的文件路径映射到文件系统中的实际路径，然后读取文件内容，并返回给浏览器。基于原生 ESMoudle，Vite 不需要像 Webpack 那样打包，而是直接将源码返回给浏览器，从而实现快速的开发体验。</li><li><strong>‌ 按需编译与热更新</strong>‌。</li></ol><ul><li><p>‌ 按需编译 ‌：浏览器请求文件时，Vite 通过插件（如@vitejs/plugin-vue）即时编译单文件组件（SFC）或 TypeScript 文件。‌‌</p></li><li><p>‌HMR 热更新 ‌：修改文件后，仅重新编译变更部分，通过 WebSocket 推送更新到浏览器，保持应用状态。‌‌</p></li></ul><p>‌‌</p><p><strong>‌ 生产环境构建 ‌</strong></p><p>生产模式下，Vite 使用 <code>Rollup</code> 进行全量打包，生成优化的静态资源（代码分割、Tree-shaking 等），配置文件为 vite.config.js。‌‌</p><p>‌‌</p>',9)],s={},o=(0,l(6262).A)(s,[["render",function(e,i){return(0,t.uX)(),(0,t.CE)("div",null,n)}]]),r=JSON.parse('{"path":"/mianshi/Webpack%E6%9E%84%E5%BB%BA%E6%B5%81%E7%A8%8B.html","title":"Webpack 构建流程","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"Vite 的构建流程","slug":"vite-的构建流程","link":"#vite-的构建流程","children":[]}],"git":{},"filePathRelative":"mianshi/Webpack构建流程.md"}')}}]);