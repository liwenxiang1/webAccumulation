## esbuild 和 rollup 都是 vite 的基础依赖， 那么他们有啥不同

esbuild 和 Rollup 都是 Vite 的基础依赖，但它们在 Vite 中担负着不同的角色和任务。

1. **esbuild：** esbuild 是一个快速、可扩展的 JavaScript 打包器，它被用作 `Vite` 的默认构建工具。`esbuild` 的主要任务是将源代码转换为浏览器可以理解的代码，同时还支持压缩、代码分割、按需加载等功能。`esbuild` 利用其高性能的构建能力，实现了快速的开发服务器和热模块替换。

2. **Rollup：** Rollup 是一个 JavaScript 模块打包工具，也是 `Vite` 的另一个基础依赖。在 `Vite` 中，`Rollup` 主要用于生产构建阶段。它通过静态分析模块依赖关系，将多个模块打包为一个或多个最终的输出文件。Rollup 支持多种输出格式，如 `ES 模块`、`CommonJS`、`UMD` 等，可以根据项目的需要进行配置。

尽管 `esbuild` 和 `Rollup` 都是 `Vite` 的基础依赖，但它们的分工是不同的。`esbuild` 用于开发服务器阶段，通过实时编译和提供模块来实现快速的冷启动和热模块替换。而 `Rollup` 用于生产构建阶段，将源代码打包为最终可发布的文件，以用于部署到生产环境。这样的分工使得 Vite 在开发过程中能够快速响应变化，并在构建过程中生成高效的最终输出文件。

**Vite 编译器的主要组成部分包括：**

1. **esbuild：** 一个快速的 JavaScript 打包器，用于在开发阶段进行实时编译。esbuild 提供了快速的冷启动和热模块替换功能，能够极大地加快开发环境的构建速度。

2. **Rollup：** 一个强大的 JavaScript 模块打包器，在生产构建阶段使用。Rollup 能够将源代码打包为最终可发布的文件，支持代码分割、Tree Shaking 等优化技术，生成更小、更高效的代码包。

3. **前端开发服务器：** Vite 还提供了一个内置的开发服务器，用于提供开发环境下的静态文件服务和构建工具集成。这个服务器能够利用 esbuild 实现快速的编译和热模块替换，使开发者在开发过程中可以快速地预览和调试代码。

4. **插件系统：** Vite 通过插件系统来扩展其功能。开发者可以编写自定义的插件，用于处理特定的文件类型、引入额外的功能或者定制构建过程。插件系统使得 Vite 能够与各种前端框架和工具集成，并提供更灵活的开发体验。
